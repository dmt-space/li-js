<script type="module" src="./layout-app.js"></script>
<script type="module" src="../icons/icons.js"></script>
<script type="module" src="../icon/icon.js"></script>
<script type="module" src="../button/button.js"></script>
<script src="../../lib/pouchdb/pouchdb-7.1.1.js"></script>
<script type="module" src="../chart-apex/chart-apex.js"></script>

<link href="../../lib/tabulator/css/tabulator_simple.min.css" rel="stylesheet">
<script type="text/javascript" src="../../lib/tabulator/js/tabulator.min.js"></script>

<link rel="stylesheet" href="../../lib/awesome-notifications/style.css"></link>
<script src="../../lib/awesome-notifications/index.var.js"></script>

<style>
    html * {
        /* font-size: 1.05em; */
        color: gray;
        font-family: Arial;

    }

    @-webkit-keyframes fade-in {
        0% {
            opacity: 0;
        }

        100% {
            opacity: 1;
        }
    }

    @-moz-keyframes fade-in {
        0% {
            opacity: 0;
        }

        100% {
            opacity: 1;
        }
    }

    @-o-keyframes fade-in {
        0% {
            opacity: 0;
        }

        100% {
            opacity: 1;
        }
    }

    @keyframes fade-in {
        0% {
            opacity: 0;
        }

        100% {
            opacity: 1;
        }
    }

    body {
        -webkit-animation: fade-in 2s linear;
        /* Safari 4+ */
        -moz-animation: fade-in 2s linear;
        /* Fx 5+ */
        -o-animation: fade-in 2s linear;
        /* Opera 12+ */
        animation: fade-in 2s linear;
        /* IE 10+, Fx 29+ */
    }
</style>

<body id="nav" hidden style="margin:0">
<li-layout-app>
    <div slot="app-left">
        <div style="display:flex; flex-direction:column; align-items: left; justify-content: center">
            <br>
            <li-button onclick="notifier.success('Your custom message');" style=" border-radius:4px;" label="Show Success" width="auto"></li-button>
            <li-button onclick="notifier.tip('Your custom message Your custom message Your custom message Your custom message ');" style="border-radius:4px;" width="auto">Show Tip</li-button>
            <li-button onclick="notifier.info('Your custom message');" style="border-radius:4px;" width="auto">Show Info</li-button>
            <li-button onclick="notifier.warning('Your custom message');" style="border-radius:4px;" width="auto">Show Warning</li-button>
            <li-button onclick="notifier.alert('Your custom message');" style="border-radius:4px;" width="auto">Show Alert</li-button>
            <li-button onclick="notifier.modal('<b>Custom modal window message</b>');" style="border-radius:4px;" width="auto">Modal message</li-button>
        </div> 
        <div id="example-table2"></div>

    </div>

    <li-icons slot="app-right"></li-icons>
    
    <div slot="app-top" style="display:flex; align-items: center; justify-content: center;">
        li-Navigator
    </div>
    <div slot="app-bottom" style="display:flex;; align-items: center; justify-content: left;">
        <li-button size=28 name="home" fill="gray" style="padding:2px" br="none:50%" onclick="notifier.modal('<b>Home</b>');" ></li-button>
        <div style="flex:1"></div>
        <li-button size=28 name="cloud-queue" fill="gray" style="padding:2px" br="none:50%" onclick="notifier.modal('<b>Cloud</b>');" style="border-radius:4px;"></li-button>
        <li-button size=28 name="settings" fill="gray" style="padding:2px" br="none:50%" onclick="notifier.modal('<b>Settings</b>');" ></li-button>
        <li-button size=28 name="help-outline" fill="gray" style="padding:2px" br="none:50%" onclick="notifier.modal('<b>Help</b>');" ></li-button>
    </div>
    <div slot="app-main">
        <div id="example-table3" style="overflow: auto;"></div>
        <br>
        <div id="example-table" style="border:1px solid lightgray; overflow: auto; min-width:0px; "></div>
        <br>


        <li-chart-apex></li-chart-apex>


    </div>
</li-layout-app>

</body>

<script>
    var tabledata = [
        {
            id: '1', name: "Oli Bob", location: "United Kingdom", gender: "male", rating: 1, col: "red", dob: "14/04/1984", _children: [
                {
                    id: '1.1', name: "Mary May", location: "Germany", gender: "female", col: "blue", dob: "14/05/1982", _children: [
                        {
                            id: '1.1.1', name: "Oli Bob", location: "United Kingdom", gender: "male", rating: 1, col: "red", dob: "14/04/1984", _children: [
                                {
                                    id: '1.1.1.1', name: "Mary May", location: "Germany", gender: "female", col: "blue", dob: "14/05/1982", _children: [
                                        { id: 2, name: "Mary May", location: "Germany", gender: "female", rating: 2, col: "blue", dob: "14/05/1982" },
                                        { id: 3, name: "Christine Lobowski", location: "France", gender: "female", rating: 0, col: "green", dob: "22/05/1982" },
                                        { id: 4, name: "Brendon Philips", location: "USA", gender: "male", rating: 1, col: "orange", dob: "01/08/1980" },
                                        { id: 5, name: "Margret Marmajuke", location: "Canada", gender: "female", rating: 5, col: "yellow", dob: "31/01/1999" },
                                        { id: 6, name: "Frank Harbours", location: "Russia", gender: "male", rating: 4, col: "red", dob: "12/05/1966" },
                                        { id: 7, name: "Jamie Newhart", location: "India", gender: "male", rating: 3, col: "green", dob: "14/05/1985" },
                                        { id: 8, name: "Gemma Jane", location: "China", gender: "female", rating: 0, col: "red", dob: "22/05/1982" },
                                        { id: 9, name: "Emily Sykes", location: "South Korea", gender: "female", rating: 1, col: "maroon", dob: "11/11/1970" },
                                        { id: 10, name: "James Newman", location: "Japan", gender: "male", rating: 5, col: "red", dob: "22/03/1998" },
                                    ]
                                },
                                { id: '1.1.1.2', name: "Christine Lobowski", location: "France", gender: "female", col: "green", dob: "22/05/1982" },
                            ]
                        },
                    ]
                },
                { id: '1.2', name: "Christine Lobowski", location: "France", gender: "female", col: "green", dob: "22/05/1982" },
            ]
        },
        { id: 2, name: "Mary May", location: "Germany", gender: "female", rating: 2, col: "blue", dob: "14/05/1982" },
        { id: 3, name: "Christine Lobowski", location: "France", gender: "female", rating: 0, col: "green", dob: "22/05/1982" },
        { id: 4, name: "Brendon Philips", location: "USA", gender: "male", rating: 1, col: "orange", dob: "01/08/1980" },
        { id: 5, name: "Margret Marmajuke", location: "Canada", gender: "female", rating: 5, col: "yellow", dob: "31/01/1999" },
        { id: 6, name: "Frank Harbours", location: "Russia", gender: "male", rating: 4, col: "red", dob: "12/05/1966" },
        { id: 7, name: "Jamie Newhart", location: "India", gender: "male", rating: 3, col: "green", dob: "14/05/1985" },
        { id: 8, name: "Gemma Jane", location: "China", gender: "female", rating: 0, col: "red", dob: "22/05/1982" },
        { id: 9, name: "Emily Sykes", location: "South Korea", gender: "female", rating: 1, col: "maroon", dob: "11/11/1970" },
        { id: 10, name: "James Newman", location: "Japan", gender: "male", rating: 5, col: "red", dob: "22/03/1998" },
    ];

    var table = new Tabulator("#example-table", {
        
        layout: "fitDataStretch",
        data: tabledata,
        dataTree: true,
        dataTreeStartExpanded: true,
        groupBy: "gender",

        columns: [
            { title: "id", field: "id", frozen: true },
            { title: "Name", field: "name" },
            { title: "Location", field: "location", sorter: "string" },
            { title: "Gender", field: "gender" },
            { title: "Rating", field: "rating", sorter: "number", bottomCalc: "sum", bottomCalcParams: { precision: 2 } },
            { title: "Favourite Color", field: "col" },
            { title: "Date Of Birth", field: "dob", hozAlign: "center" },
        ],
    });

    var tabledata2 = [
        {
            id: 1, name: "Billy Bob", age: "12", "_children": [
                { id: 2, name: "Mary May", age: "1" }, //child rows nested under billy bob
                { id: 3, name: "Christine Lobowski", age: "42" },
                {
                    id: 4, name: "Brendon Philips", age: "125", "_children": [
                        { id: 5, name: "Margret Marmajuke", age: "16" }, //child rows nested under brendon philps
                        { id: 6, name: "Frank Peoney", age: "12" },
                    ]
                },
            ]
        },
        { id: 7, name: "Jenny Jane", age: "1" },
        {
            id: 8, name: "Martha Tiddly", age: "42", "_children": [
                { id: 9, name: "Frasier Franks", age: "125" }, //child row nested under martha tiddly
            ]
        },
        { id: 10, name: "Bobby Green", age: "11" },
        {
            id: 1, name: "Billy Bob", age: "12", "_children": [
                { id: 2, name: "Mary May", age: "1" }, //child rows nested under billy bob
                { id: 3, name: "Christine Lobowski", age: "42" },
                {
                    id: 4, name: "Brendon Philips", age: "125", "_children": [
                        { id: 5, name: "Margret Marmajuke", age: "16" }, //child rows nested under brendon philps
                        { id: 6, name: "Frank Peoney", age: "12" },
                    ]
                },
            ]
        },
        { id: 7, name: "Jenny Jane", age: "1" },
        {
            id: 8, name: "Martha Tiddly", age: "42", "_children": [
                { id: 9, name: "Frasier Franks", age: "125" }, //child row nested under martha tiddly
            ]
        },
        { id: 10, name: "Bobby Green", age: "11" },
        {
            id: 1, name: "Billy Bob", age: "12", "_children": [
                { id: 2, name: "Mary May", age: "1" }, //child rows nested under billy bob
                { id: 3, name: "Christine Lobowski", age: "42" },
                {
                    id: 4, name: "Brendon Philips", age: "125", "_children": [
                        { id: 5, name: "Margret Marmajuke", age: "16" }, //child rows nested under brendon philps
                        { id: 6, name: "Frank Peoney", age: "12" },
                    ]
                },
            ]
        },
        { id: 7, name: "Jenny Jane", age: "1" },
        {
            id: 8, name: "Martha Tiddly", age: "42", "_children": [
                { id: 9, name: "Frasier Franks", age: "125" }, //child row nested under martha tiddly
            ]
        },
        { id: 10, name: "Bobby Green", age: "11" },
        {
            id: 1, name: "Billy Bob", age: "12", "_children": [
                { id: 2, name: "Mary May", age: "1" }, //child rows nested under billy bob
                { id: 3, name: "Christine Lobowski", age: "42" },
                {
                    id: 4, name: "Brendon Philips", age: "125", "_children": [
                        { id: 5, name: "Margret Marmajuke", age: "16" }, //child rows nested under brendon philps
                        { id: 6, name: "Frank Peoney", age: "12" },
                    ]
                },
            ]
        },
        { id: 7, name: "Jenny Jane", age: "1" },
        {
            id: 8, name: "Martha Tiddly", age: "42", "_children": [
                { id: 9, name: "Frasier Franks", age: "125" }, //child row nested under martha tiddly
            ]
        },
        { id: 10, name: "Bobby Green", age: "11" },
        {
            id: 1, name: "Billy Bob", age: "12", "_children": [
                { id: 2, name: "Mary May", age: "1" }, //child rows nested under billy bob
                { id: 3, name: "Christine Lobowski", age: "42" },
                {
                    id: 4, name: "Brendon Philips", age: "125", "_children": [
                        { id: 5, name: "Margret Marmajuke", age: "16" }, //child rows nested under brendon philps
                        { id: 6, name: "Frank Peoney", age: "12" },
                    ]
                },
            ]
        },
        { id: 7, name: "Jenny Jane", age: "1" },
        {
            id: 8, name: "Martha Tiddly", age: "42", "_children": [
                { id: 9, name: "Frasier Franks", age: "125" }, //child row nested under martha tiddly
            ]
        },
        { id: 10, name: "Bobby Green", age: "11" },
        {
            id: 1, name: "Billy Bob", age: "12", "_children": [
                { id: 2, name: "Mary May", age: "1" }, //child rows nested under billy bob
                { id: 3, name: "Christine Lobowski", age: "42" },
                {
                    id: 4, name: "Brendon Philips", age: "125", "_children": [
                        { id: 5, name: "Margret Marmajuke", age: "16" }, //child rows nested under brendon philps
                        { id: 6, name: "Frank Peoney", age: "12" },
                    ]
                },
            ]
        },
        { id: 7, name: "Jenny Jane", age: "1" },
        {
            id: 8, name: "Martha Tiddly", age: "42", "_children": [
                { id: 9, name: "Frasier Franks", age: "125" }, //child row nested under martha tiddly
            ]
        },
        { id: 10, name: "Bobby Green", age: "11" },
    ];

    var headerMenu = [
        {
            label: "Hide Column",
            action: function(e, column) {
                column.hide();
            }
        },
    ]

    var table2 = new Tabulator("#example-table2", {
        data: tabledata2,
        //autoColumns: true,
        dataTree: true,
        layout: "fitDataStretch",
        columns: [
            //{ title: "id", field: "id", frozen: true, headerMenu: headerMenu },
            { title: "Name", field: "name", minWidth: '300px' },
            //{ title: "Age", field: "age" }
        ]
    });

    let d = [];
    for (let i = 0; i < 10000; i++) {
        tabledata.forEach(k => {
            d.push({...k});
        });

    }
    let c = 0;
    d.map(e=>e.id = c++)

    var table3 = new Tabulator("#example-table3", {
        width: 100,
        pagination: "local",
        paginationSize: 100,
        paginationSizeSelector: [10, 25, 50, 100, 500, 1000, 10000],
        height: '100%',
        layout: "fitDataStretch",
        data: d,
        //dataTree: false,
        //dataTreeStartExpanded: true,
        //groupBy: "gender",

        columns: [
            { title: "id", field: "id", frozen: true },
            { title: "Date Of Birth", field: "dob", hozAlign: "center" },
            { title: "Name", field: "name", bottomCalc: "count" },
            { title: "Gender", field: "gender" },
            {
                title: "R", field: "rating", hozAlign: "center", sorter: "number", bottomCalc: "sum", bottomCalcParams: { precision: 2 }, formatter: "traffic", formatterParams: {
                    min: 0,
                    max: 5,
                    color: [ "red", "orange", "yellow", "green", "blue" ],
                }
            },
            { title: "Favourite Color", field: "col" },
            { title: "Location", field: "location", sorter: "string" },
        ],
    });

    var db = new PouchDB('http://admin:54321@localhost:5984/kittens');
    db.put({
        _id: 'meowth',
        _attachments: {
            'meowth.png': {
                content_type: 'image/png',
                data: 'iVBORw0KGgoAAAANSUhEUgAAACgAAAAkCAIAAAB0Xu9BAAAABGdBTUEAALGPC/xhBQAAAuNJREFUWEetmD1WHDEQhDdxRMYlnBFyBIccgdQhKVcgJeQMpE5JSTd2uqnvIGpVUqmm9TPrffD0eLMzUn+qVnXPwiFd/PP6eLh47v7EaazbmxsOxjhTT88z9hV7GoNF1cUCvN7TTPv/gf/+uQPm862MWTL6fff4HfDx4S79/oVAlAUwqOmYR0rnazuFnhfOy/ErMKkcBFOr1vOjUi2MFn4nuMil6OPh5eGANLhW3y6u3aH7ijEDCxgCvzFmimvc95TekZLyMSeJC68Bkw0kqUy1K87FlpGZqsGFCyqEtQNDdFUtFctTiuhnPKNysid/WFEFLE2O102XJdEE+8IgeuGsjeJyGHm/xHvQ3JtKVsGGp85g9rK6xMHtvHO9+WACYjk5vkVM6XQ6OZubCJvTfPicYPeHO2AKFl5NuF5UK1VDUbeLxh2BcRGKTQE3irHm3+vPj6cfCod50Eqv5QxtwBQUGhZhbrGVuRia1B4MNp6edwBxld2sl1splfHCwfsvCZfrCQyWmX10djjOlWJSSy3VQlS6LmfrgNvaieRWx1LZ6s9co+P0DLsy3OdLU3lWRclQsVcHJBcUQ0k9/WVVrmpRzYQzpgAdQcAXxZzUnFX3proannrYH+Vq6KkLi+UkarH09mC8YPr2RMWOlEqFkQClsykGEv7CqCUbXcG8+SaGvJ4a8d4y6epND+pEhxoN0vWUu5ntXlFb5/JT7JfJJqoTdy9u9qc7ax3xJRHqJLADWEl23cFWl4K9fvoaCJ2BHpmJ3s3z+O0U/DmzdMjB9alWZtg4e3yxzPa7lUR7nkvxLHO9+tvJX3mtSDpwX8GajB283I8R8a7D2MhUZr1iNWdny256yYLd52DwRYBtRMvE7rsmtxIUE+zLKQCDO4jlxB6CZ8M17GhuY+XTE8vNhQiIiSE82ZsGwk1pht4ZSpT0YVpon6EvevOXXH8JxVR78QzNuamupW/7UB7wO/+7sG5V4ekXb4cL5Lyv+4IAAAAASUVORK5CYII='
            }
        }
    }).then(function() {
        return db.getAttachment('meowth', 'meowth.png');
    }).then(function(blob) {
        var url = URL.createObjectURL(blob);
        var img = document.createElement('img');
        img.src = url;
        document.body.appendChild(img);
    }).catch(function(err) {
        console.log(err);
    });




    var o = {
        foo: "bar",
        arr: [1, 2, 3],
        subo: {
            foo2: "bar2"
        }
    };

    //called with every property and its value
    function process(key, value) {
        console.log(key + " : " + value);
    }

    function traverse(o, func) {
        for (var i in o) {
            func.apply(this, [i, o[i]]);
            if (o[i] !== null && typeof (o[i]) == "object") {
                //going one step down in the object tree!!
                traverse(o[i], func);
            }
        }
    }

    //that's all... no magic, no bloated framework
    let t = traverse(o, process);
    console.dir(t)


    let options = {};
    // options.durations = {
    //     global: 3000
    // }
    options.icons = {
        prefix: "<li-icon name='",
        success: "check-circle' fill='#40871d' size=48",
        tip: "star-border' fill='grey' size=48",
        info: "info' fill='#1c76a6' size=48",
        warning: "error' fill=' #c26700' size=48",
        alert: "warning' fill='#a92019' size=48",
        suffix: "></li-icon>",
    }
    var notifier = new AWN(options);

    setTimeout(() => {
        nav.hidden = false;
    }, 500);
</script>