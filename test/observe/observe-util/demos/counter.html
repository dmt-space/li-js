<!DOCTYPE html>
<html>
  <body>
    <div id='display' style="font-size: xx-large;"></div>
    <hr>
    <div id='display2' style="font-size: xx-large;"></div>
    <hr>
    <div id='display3' style="font-size: xx-large;"></div>
    <hr>
    <script type="module">
      import { observable, observe, unobserve } from '../observe.js';

      const counter = observable({ value: 0 })
      let counter2 = 0
      // automatically triggered ;)
      function update() {
        display.innerHTML = counter.value
      }
      function update2() {
        display2.innerHTML = counter.value 
      }
      function update3() {
        display3.innerHTML = counter.value
      }

      // listen the coordinate updates
      observe((counter) => update());
      observe((e = counter) => update2());
      observe((e = counter) => update3());
      observe((e = counter) => console.log(e.value));

      ;(function loop() {
        counter.value ++
        requestAnimationFrame(loop)
      }())
    </script>
  </body>
</html>